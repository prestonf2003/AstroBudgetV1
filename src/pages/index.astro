---
import Layout from "../layouts/Layout.astro";
import Card from "../components/Card.astro";
import MoneyField from "../components/MoneyField.astro";
import Header from "../components/Header.astro";

let income = 0;
let debt = 0;
let total = 0;
---

<Layout title="Welcome to Astro.">
  <Header />
  <main
    class="mx-auto px-4 w-80 max-w-full text-white font-normal text-2xl leading-6"
  >
    <MoneyField label="Annual Income" />
    <br />

    <MoneyField label="Largest/Highest Priority Debt" />
    <br />
    <button
      id="calculateBtn"
      class="bg-white hover:bg-gray-600 text-zinc-900 font-bold py-2 px-4 rounded-full"
      >Calculate</button
    >

    <p id="total">Total: ${total}</p>
  </main>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const incomeField = document.querySelectorAll('input[name="price"]')[0];
      const debtField = document.querySelectorAll('input[name="price"]')[1];
      const calculateBtn = document.getElementById("calculateBtn");
      const totalElement = document.getElementById("total");

      function calculateTotal() {
        const income = parseFloat(incomeField.value) || 0;
        const debt = parseFloat(debtField.value) || 0;
        const total = income + debt;
        totalElement.innerText = `Total: $${total.toFixed(2)}`;
        console.log("Total calculated:", total);
      }

      // Calculate when the button is pressed
      calculateBtn.addEventListener("click", calculateTotal);
    });
  </script>
</Layout>
